# ChangeLog for vmware overlay
# Copyright 1999-2006 Gentoo Foundation; Distributed under the GPL v2
# $ Id: $

  21 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org> eclass/vmware.eclass:
  OK, unpack doesn't like absolute paths.

  21 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org> eclass/vmware.eclass:
  Yeah, should be CDROM_ROOT, not CD_ROOT.

  21 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org> eclass/vmware.eclass:
  Made sure we check the CD for MY_P.tar.gz when doing our unpack.

  21 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org>
  app-emulation/vmware-esx-tools/vmware-esx-tools-3.0.1-r1.ebuild:
  Made sure we keep both sbin and bin for vmware-esx-tools.

  21 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org> ++,
  -app-emulation/vmware-workstation-tools/metadata.xml:
  Renamed 5.5.3 vmware-workstation-tools ebuild to match the other ebuilds.

  20 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org>
  +app-emulation/vmware-workstation-tools/files/5.5.3/000_all_initd-scripts.
  patch:
  Added new 5.5.3 version of vmware-workstation-tools.

  18 Nov 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Did some work on the vmware-server-tools ebuild, inspired by Chris.
  It now builds the modules and installs the revelant files automatically.
  TODO: Comment out the module building from the config script.
  TODO: Fix some of the inconsistencies between /opt/vmware/tools and
        /opt/vmware/server/tools usage.

  17 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org>
  app-emulation/vmware-esx-tools/vmware-esx-tools-3.0.1.ebuild,
  +app-emulation/vmware-esx-tools/vmware-esx-tools-3.0.1-r1.ebuild:
  Added a new revision of the ESX tools, which should work with the new
  eclass. I have not tested it yet, but will do so next week if someone else
  hasn't let me know that it works by then.

  16 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org>
  +app-emulation/vmware-workstation-tools/files/5.5.2/000_all_initd-scripts.
  patch:
  Added the 5.5.2 directory to vmware-workstation-tools, so it'll patch
  correctly.

  16 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org>
  +app-emulation/vmware-esx-tools/files/90vmware-tools,
  +app-emulation/vmware-esx-tools/files/vmware-esx-tools,
  +app-emulation/vmware-esx-tools/files/vmware-esx-tools.rc,
  +app-emulation/vmware-esx-tools/files/xorg.conf,
  +app-emulation/vmware-esx-tools/metadata.xml:
  Initial import of ESX tools. This should work, but requires some manual
  intervention. Before running the vmware-config-tools.pl, you need to rmmod
  pcnet32. You will also need to rm /etc/vmware-tools/not_configured and
  /etc/init.d/vmware-tools start afterwards. I will be working on making sure
  this works with the eclass soon enough with a -r1 revision. Feel free to use
  this now, using the above instructions.

  16 Nov 2006; Chris Gianelloni <wolf31o2@gentoo.org>
  -app-emulation/vmware-workstation-tools/vmware-workstation-tools-5.5.1-r1.
  ebuild,
  app-emulation/vmware-workstation-tools/vmware-workstation-tools-5.5.1-r2.e
  build,
  +app-emulation/vmware-workstation-tools/vmware-workstation-tools-5.5.2.ebu
  ild:
  Added vmware-workstation-tools-5.5.2 and removed the -r1 ebuild for 5.5.1.

  15 Nov 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Brought the overlay back in sync with the main tree for vmware-modules and
  vmware-server{-console}.
  Also updated to vmware-any-any105 for testing.

  30 Oct 2006; Chris Gianelloni <wolf31o2@gentoo.org>
  -app-emulation/vmware-modules/vmware-modules-1.0.0.8.ebuild:
  Removed vmware-modules-0.0.8 since we no longer support VMware Workstation
  3.2.1 in the main tree.

  17 Oct 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  I just realized the typo was causing vmware-any-any not to build with server.
  Out goes the huge 100 Mb download, it should all work fine now, sorry.  5:(
  
  17 Oct 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Fix a typo in vmware-mod before it gets in the tree.
  Also clean up some whitespace errors.

  04 Oct 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Reorder VMWARE_VER to ensure it gets picked up in time.
  Fix for bug 149679 thanks to Jason Urbank.

  04 Oct 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Synced up the vmware.eclass from the overlay and fixed up a directory/file mismatch.

  03 Oct 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Hope this openssl problem can finally be done with.
  Thanks Chris for getting the libraries built and done so quickly!!!  5:)
  
  02 Oct 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Oops, very quick fix for vmware-server-console to actually unpack the new openssl lib
  (since we don't inherit the unpack of vmware.eclass).  Hopefully got it out in time...
  
  02 Oct 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Sync vmware.eclass, vmware-server and vmware-server-console with the in-tree version.
  
  02 Oct 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Updated eclass with the in-tree version for bug #148862.

  27 Sep 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Update vmware-server{,-console}'s dbus restrictions and bump to ensure security fix.

  27 Sep 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Sync vmware.eclass with the in-tree version due to bug #148682.

  27 Sep 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Updated vmware.eclass and vmware-mods.eclass from portage.

  22 Sep 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  We should be setting MY_P if we expect our tarball to be unpacked.  Ooops...

  22 Sep 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Manifest/digest fix.

  21 Sep 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Sync vmware.eclass with the in-tree version and fix the variables in
  vmware-workstation-tools.

  13 Sep 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Since I think the patch is probably only relevant to gcc-4.1, I've moved it
  out of the patch directory and applied it directly if the gcc version matches.
  I'm going to leave the eclass changes in place (but only in the overlay),
  since they'll probably be handy in the future...

  03 Sep 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Added an experimental patch vmware-modules-1.0.0.15 in an attempt to fix bug
  146004.

  17 Aug 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Version bump vmware-server-1.0.1.29996.
  Version bump vmware.eclass to use vmware-any-any104.

  11 Aug 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Sync eclass with portage tree.  See bug #137423 for more information.

  09 Aug 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Removed vmware-player, since it has been moved to the tree.

  08 Aug 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Try to keep the main tree and overlay synched, by copying over the minor
  edits in vmware.eclass

  05 Aug 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Added a fix from bug 142855 for issues arising if KBUILD_OUTPUT is set.
  
  04 Aug 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Added a new revision of vmware-player and vmware-workstation-tools (5.5) for
  testing.  The new revisions of both fully utilize the vmware eclass, so they
  should end up much easier to maintain in the future.  They have not been
  tested, but looking at what they are actually doing, they should work
  perfectly, since support for all of their code was already in the eclass.

  04 Aug 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Updated the patch for vmware-modules to use any kernel path, rather than
  just /usr/src/linux, with a new patch courtesy of Alon Bar-Lev
  (see bug 137422).
  
  31 Jul 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Fixing up quoting issues in the eclasses.  Might have gone overboard in
  the vmware.eclass, but at least it won't sting us in the tail if we 
  add a space in later for any reason...
  
  28 Jul 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Fixing up quoting issues in the eclasses, kindly pointed out by phreak``.
  
  27 Jul 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Fix up basic repoman failings, in preparation for merging with the main tree...
  
  17 Jul 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Thanks to the eagle eyes of Cardoe, we now have a dependency in the vmware
  eclass for the update-mime-info tool.  That should get inheritted automatically
  by every ebuild, so this should fix it for all our packages.
  
  14 Jul 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Fixed up the LONGNAME/SHORTNAME issue when using the vmware-any-any init
  script.  Also added patch 009 to the workstation-4.5 patchset.
  
  14 Jul 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Added patch 009 to the latest versions of player, workstation and server.
  This patch changes the "not configured" error message of the init script.
  
  14 Jul 2006; Mike Auty <ikelos@gentoo.org> ChangeLog:
  Fixed up three broken manifests...

  13 Jul 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  This is another fairly large update from me, but it is mostly clean-up stuff.
  
  * Removed old and unused vmware-pkg.eclass
  * Removed older "test" functions from vmware.eclass for the modules builds
  * Changed not-vmware_src_install to vmware_src_install and exported it
  * Added vmware-workstation-tools-5.5.1-r1 ebuild
  * Renamed vmware-workstation-tools-4.5.3 ebuild to
  vmware-workstation-tools-4.5.3-r1 so it is an "upgrade" for users
  * Removed vmware-workstation-5.5.1.19175-r6
  * Cleaned older vmware-server and vmware-server-console ebuilds
  * Cleaned older vmware-player ebuilds
  * Made sure everything has ~amd64 ~x86 KEYWORDS, except Workstation 3.x
  * Made sure all digests were correct for packages I touched
  
  This is the preliminary clean-up for possible tree inclusion.  Hopefully,
  there won't be much editing required, if any, for this stuff to start making
  its way into the portage tree.

  12 Jul 2006; Mike Auty <ikelos@gentoo.org>:
  Still UNUSABLE attempt at a vmware-server-tools ebuild.  It's currently
  descended from vmware-mod.eclass, and does all the installation stuff itself.
  It currently needs the vmware.eclass too, but I'm hoping to move that need
  out of there, and then maybe remove those bits in vmware.eclass that were
  expecting the tools to be a part of it.

  I decided to have just a single ebuild for each of the tools and have the
  modules done as part of that, because of determining the location of the
  source files.  Rather than downloading them, I am actually trying to get them
  live from the cd-rom.  Issues with this are if the bits that need installing
  are different for different versions, and if the number of ebuilds necessary
  grows too much.

  Still, hopefully we'll have something going soon, we can remove the remaining
  installation bits off to vmware.eclass or something, and then it should all
  be good to go...  5:)
  
  12 Jul 2006; Mike Auty <ikelos@gentoo.org>:
  Pushing out build 1.0.0.28343, which seems to be the final Vmware-server!
  YAY!  5:)
  
  08 Jul 2006; Mike Auty <ikelos@gentoo.ogr>:
  Re-arranged the vmware-mod.eclass.  It looks like it should be able to handle 
  the various modules for the vmware-*-tools.  The problem is that since we
  don't have a nice vmware-any-any package for the tool modules, we can't just
  use an environment variable and a single source package.  So how do we go
  about unpacking it from the provided tarball, if the main package is built
  elsewhere?  Do we require the file for both programs?  Do we augment the
  vmware-tools-modules to require the install file, and if so, how do we know
  which version we installed?
  Ideas on a postcard to...  5:)
  
  08 Jul 2006; Mike Auty <ikelos@gentoo.org>:
  First attempt at a vmware-server-tools package, based on a user submitted
  ebuild (thanks to Anthony Red in bug 122670) and the vmware-workstation-tools
  ebuild. There are likely to be a lot of changes to it, whilst I work out what
  it does, during that time I'd suggest NOT using it...  5:)

  02 Jul 2006; Mike Auty <ikelos@gentoo.org>:
  Fixed a mistake in the vmware-mod.eclass, where I'd left out the EPATCH_SUFFIX.
  It didn't show itself because I was always building the modules for the running
  kernel.  And that why you have other people bugtest for you...  5:)
  
  29 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Added the required files for the vmware-overlay to work as a Paludis
  overlay.  Make note: new files are one thing, deviations that will break
  the ebuild with portage are another...  5:)
  
  27 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Changed the vmware-server ebuild to make use of ${config_dir}.
  It should also now start applying the amd64 pam.d patch correctly again.
  
  27 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Finally remove the old vmware-modules-101 ebuild, since it's not
  required by any packages in the tree anymore.  I hope to remove the
  vmware-pkg.eclass soon (I can't even remember which version of server
  made use of it, but if that ever gets unmerged, vmware-pkg still needs
  to be there).

  Once all that's done, we should probably move not-vmware-src-install
  over to vmware-src-install (and alias not-vmware-src-install to avoid
  breakages).  After that, there's a few fix-ups (symlinks, desktop icons)
  that need doing.  We're getting closer though, so it might be time
  to start adding ~x86 to some of the workstation/player builds, to get
  some people testing them... 5:)
  
  25 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Pushed out the latest builds for vmware-server/server-console (27828).
  
  23 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Altered the vmware.eclass to create a VMWARE_GROUP for console products too.

  19 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Comment out a line in the eclass that was breaking vmware-server when
  compiled with FEATURES="userpriv".  It seemed to reset all the permissions
  including the set-UID bit.  It was only included to avoid permission
  warnings with vmware-workstation.  If the warnings start again, we'll
  try and figure out another workaround.
  
  19 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Refactored several bits of the vmware.eclass based on the inconsistent naming
  scheme used by vmware-server-console to locate it's configuration info.

  I also finished off converting vmware-server over to the vmware.eclass
  and pushed vmware-server-console over to it too.  Hopefully we're nearly there
  now...  5:)
  
  16 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Ok, just double checked/lined up the vmware-module version numbers
  with the packages building against them.
  
  16 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Just a couple quick changes.
  I modified the vmware-player-1.0.x-r5 ebuild, just a bit of cleaning up.
  I also fixed a tiny typo in the vmware.eclass.

  vmware-player now seems to be a go with the new modules on ~x86 (although I've
  left it masked).

  14 Jun 2006; Chris Gianelloni <wolf31o2@gentoo.org>:
  Well, I've done quite a few changes.
  
  - Ported all of the remaining code from src_install in vmware-workstation to
  vmware.eclass
  - Ported vmware-workstation 3.x and 4.x to vmware-modules and the
  vmware.eclass
  - Removed all older versions/revisions that are currently in the portage tree,
  as they're unnecessary
  - Marked the new 5.5 version of vmware-workstation as ~amd64 and ~x86 as it
  has now been tested and appears to work just fine

  13 Jun 2006; Mike Auty <ikeloes@gentoo.org>:
  Also today, I removed the last few svn:keywords that meant I had to keep
  recalculating the manifests.  Handy though they might have been, it's easier
  to do revbumps to differentiate the versions, than it is to manually keep 
  redoing those manifests and checking them back in again...
  
  13 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Added revision bumps for vmware-player-1 and vmware-workstation-5.5, to use
  the new style vmware-modules ebuilds.  These haven't been tested at all, but
  are also keyworded "-*" so shouldn't cause any problems.  I've also added 
  the required ebuilds for when vmware-workstations-{3,4} get given the 
  vmware.eclass treatment.

  Let me just reiterate that these ebuilds are *extremely* untested, not just
  the normal untested you're used to...  5;)

  07 Jun 2006; Mike Auty <ikelos@gentoo.org>:
  Added a vmware-mod.eclass, and associated vmware-modules-1.0.0.15.ebuild for
  vmware-server-1.0.0.24927.  As soon as an any-any update comes out that
  supports this version, the ebuild will be altered to use that instead.
  
  In the meantime, I've published a small tar file containing the sources from
  the vmware-server release itself.  Hopefully this won't happen very often. 
  I've also added a vmware-modules-1.0.0.14.ebuild, which I'll eventually move 
  the older vmware-server build over to (even though that'll expire soon), just
  so you can see how it's supposed to work...  5:)

  Also updated the vmware-server-console package to build 24927 too.  I need to
  rework the 24927 ebuild PATCHES variable, so I don't need two copies of patches
  floating around for the two versions in portage...

  01 Jun 2006; Chris Gianelloni <wolf31o2@gentoo.org> ChangeLog:
  Restored older (working) vmware-workstation and vmware-player ebuilds. I also
  masked the newer revisions of the ebuilds for both until I can get everything
  into the eclass like I want.  They ebuilds *shold* work, but I make no
  guarantees.
  
  Some other changes:
  
  * Removed erroneous DEPEND from vmware-workstation-tools
  * Updated eclass to work with either a patch directory or the PATCHES variable
  * Started on src_install for the eclass
  * fixed a few typos here and there
  * Added lots more comments to the eclass

  28 May 2006; Mike Auty <ikelos@gentoo.org> :
  Ok, a lot of changes this time round:

  * vmware-player converted to use vmware.eclass
  * workstation/player converted to use vmware-modules
  * udev rule creation moved to vmware-modules
  * eclass modified to work with patch directories
  * dhcpd.conf location fix added to vmware-server
  * vmware-server converted to use vmware_src-unpack
  * player/workstaton added a patch to use modprobe over insmod

  I've tested the latest player/server ebuilds on x86.
  Workstation installed fine, but without a license was hard to test.  5:)
  I didn't want to mess with the any_any patching for the testing, so if 
  that's required we'll have to add the any_any source back into SRC_URI,
  and remove the ANY_ANY="" lines.  Note there may still be some ${product}
  changes needed in the vmware-player ebuild too.

  19 May 2006; Chris Gianelloni <wolf31o2@gentoo.org> :
  I know that this is the first version of the ChangeLog, even though we have
  already been committing, but I figured I would add this here to keep things
  in order and so that people know what is going on with the overlay. I just
  made some modifications to the vmware.eclass to give it support for
  pkg_setup, src_unpack, pkg_preinst, and pkg_postinst. I also created a new
  vmware-server revision, but since I haven't tested it yet, I have it marked
  as -* so nobody gets it by accident and blames ikelos. The
  vmware-workstation ebuild for 5.5.1 has been updated, and *should* work, but
  I make no guarantees. I plan on slowly updating everything as time permits,
  and will also be adding more functionality to the eclass. I'm really trying
  to put the brunt of all the code from all of the packages into the eclass,
  since they are all so similar. Anyway, enough of my ranting. Enjoy.

